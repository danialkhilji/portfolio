---
interface Props {
  activePage: string;
}

const { activePage } = Astro.props;
const base = import.meta.env.BASE_URL;

const navItems = [
  { name: "Home", href: `${base}`, page: "home" },
  { name: "About", href: `${base}about`, page: "about" },
  { name: "Career", href: `${base}career`, page: "career" },
  { name: "Projects", href: `${base}projects`, page: "projects" },
  { name: "Certificates", href: `${base}certificates`, page: "certificates" },
];
---

<nav
  class="fixed top-5 left-0 right-0 z-[1000] mx-auto w-fit rounded-[20px] bg-brand-cyan shadow-lg px-2.5 py-1.5 flex flex-wrap justify-center items-center"
  aria-label="Main navigation"
>
  <button
    id="nav-toggle"
    class="md:hidden p-2 text-brand-dark"
    aria-label="Toggle navigation"
    aria-expanded="false"
  >
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>
  <ul
    id="nav-menu"
    class="hidden md:flex flex-col md:flex-row items-center list-none m-0 p-0"
  >
    {
      navItems.map((item) => (
        <li>
          <a
            href={item.href}
            class:list={[
              "block mx-2.5 my-1 md:my-0 font-medium transition-colors duration-300 no-underline",
              activePage === item.page
                ? "text-brand-dark font-semibold"
                : "text-brand-dark hover:text-brand-dark",
            ]}
            aria-current={activePage === item.page ? "page" : undefined}
          >
            {item.name}
          </a>
        </li>
      ))
    }
  </ul>
</nav>

<script>
  const toggle = document.getElementById("nav-toggle");
  const menu = document.getElementById("nav-menu");
  toggle?.addEventListener("click", () => {
    const expanded = toggle.getAttribute("aria-expanded") === "true";
    toggle.setAttribute("aria-expanded", String(!expanded));
    menu?.classList.toggle("hidden");
  });
</script>
